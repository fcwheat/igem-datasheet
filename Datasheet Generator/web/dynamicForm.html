<!DOCTYPE html>
<!contains form and login code>
<html>
    
    <head>
        <title>Owl</title>
        <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
        <link href="css/bootstrap-responsive.min.css" rel="stylesheet" media="screen">
    </head>
    
    <body class="container">
        
        <div class="navbar navbar-fixed-top">
            <div class="navbar-inner"> 
                <div class="container">
                    <a class="brand" href="index.html">Owl</a>
                    <ul class="nav">
                        <li><a href="editExisting.html">Search Existing Parts</a></li>
                        <li class="active"><a href="dynamicForm.html">Create Data Sheet</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul> 
                    <div id="loginArea">
                        <form id="loginForm" class="navbar-form pull-right" action="AuthenticationServlet" method="POST">
                            <input name="user" type="text" class="span2" placeholder="Login">
                            <input name="password" type="password" class="span2" placeholder="Password">
                            <input type="submit" value="Login" class="btn"/>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="page-header" style="margin-top:50px">
            <h1>Owl <small>Build your data sheet here</small></h1>
        </div>
        
        <div class="tabbable tabs-left">
            
            <ul class="nav nav-tabs nav-pills well">
                <li class="active"><a data-toggle="tab" href="#basicInfo">Basic Information</a></li>
                <li><a data-toggle="tab" href="#contactInformation">Contact Information</a></li>
                <li><a data-toggle="tab" href="#designInformation">Standard Design Information</a></li>
                <li><a data-toggle="tab" href="#assayOptions">Assay</a></li>
                <li><button class="btn btn-success" id="designButton" style="width:100%">Make Datasheet</button></li>
            </ul>
            
            <div class="tab-content" id="tabs">
                <!--Basic Info-->
                <div id="basicInfo" class="active tab-pane" style="margin-top:-15px">
                    <h2>Basic Information</h2>
                    <div class="well">
                        <div class="row-fluid">
                            <div class="span4">
                                <div><h5>Part Name</h5><input id="name"/></div>
                                <div id="partType"><h5>Part Type</h5>
                                    <select>
                                        <option>
                                            Basic Part
                                        </option>
                                        <option>
                                            Composite Part
                                        </option>
                                    </select>
                                    <div><h5>Sequence</h5><input class="data" id="sequence"></div>     
                                </div>
                            </div>                       
                        </div>
                        <div class="row-fluid">
                            <div><h5>Link to Pigeon image of device</h5><input class="data" id="deviceImage"></div>
                            <div><h5>Link to plasmid map of device</h5><input class="data" id="plasmidMap"></div>

                        </div>
                        <div class="row-fluid">
                            <div><h5>Part Summary</h5><textarea  class="data" id="summary" rows="5" style="width:98%"></textarea></div>
                        </div>

                        <button class="btn back"><strong>Back</strong></button>
                        <button class="btn next"><strong>Next</strong></button>

                    </div>
                </div>

                <!--Contact Info-->
                <div id="contactInformation" class="tab-pane" style="margin-top:-15px">
                    <h2>Contact Information</h2>
                    <div class="well">     
                        <div class="row-fluid">
                            <div class="span4">
                                <div><h5>Author(s)</h5><input class="data" id="authors"/></div>
                                <div><h5>Team</h5><input class="data" id="team"/></div>  
                                <div><h5>Data Collectors</h5><input class="data" id="dataCollection"/></div>
                                <div><h5>Date</h5><input class="data" id="date"/></div>
                            </div>   
                            <div class="span6">
                                <div><h5>Affiliation</h5><input class="data" id="affiliation"/></div>
                                <div><h5>Contact</h5><input class="data" id="contact"/></div>
                                <div><h5>Related Parts</h5><textarea rows="5" class ="data" id="relatedParts"></textarea></div>

                            </div>        
                        </div>
                        <button class="btn back"><strong>Back</strong></button>
                        <button class="btn next"><strong>Next</strong></button>

                    </div>
                </div>
                
                <!--Standard Required Design Information-->
                <div id="designInformation" class="tab-pane" style="margin-top:-15px">
                    <h2>Standard Required Design Information</h2>
                    <div class="well"> 
                        <div class="row-fluid">
                            <div class="span4">    
                                <div><h5>Chassis</h5><input class="data" id="chassisName"></div>
                                <div><h5>Device Name</h5><input class="data" id="deviceName"></div>
                                <div><h5>Device Type</h5><input class="data" id="deviceType"></div>
                                <div><h5>Safety Level</h5><input class="data" id="safetyLevel"></div>  
                                <div><h5>Strain</h5><input class="data" id="strain"></div>
                                <div><h5>Components</h5><textarea rows="5" id="components"></textarea></div>
                            </div>
                            <div class="span6">                 
                                <div><h5>Assembly</h5><input class="data" id="assembly"></div>
                                <div><h5>Protocol</h5><input class="data" id="protocol"></div>
                                <div><h5>Scars</h5><input class="data" id="scars"></div>
                                <div><h5>Insertion</h5><input class="data" id="insertion"></div>
                                <div><h5>Vector</h5><input class="data" id="vector"></div>
                                <div><h5>Additional Details</h5><textarea rows="5" class="data" id="designComments"></textarea></div>

                            </div>
                        </div>
                        <button class="btn back"><strong>Back</strong></button>
                        <button class="btn next"><strong>Next</strong></button>

                    </div>
                </div>    


                <!--Demonstration of Device Functionality-->
                <div id="assayOptions" class="tab-pane" style="margin-top:-15px">  
                    <h2>Assay</h2>   
                    <div class="well" style="margin-left: 10px">
                        <select id="selectAssay" > 
                            <option>Choose Assay</option>
                            <option>Restriction Digest and Gel Electrophoresis</option>
                            <option>Flow Cytometry</option>
                            <option>Other</option>
                        </select>
                        
                        <button class="btn btn-primary" id="addAssayButton" style="margin-left:10px; margin-top: -10px">Add Assay</button>
                        <br/>
                        <div id="standardAssays" class="hidden">    
                            <h3>Restriction Digest and Gel Electrophoresis</h3>
                            <div class="well">
                                <div class="row-fluid">
                                    <div class="span4">    
                                        <div><h5>Purpose</h5><input class="assayData" id="Purpose"></div>
                                        <div><h5>Data Type</h5><input class="assayData" id="dataType"></div>
                                        <div><h5>Location</h5><input class="assayData" id="location"></div>
                                        <div><h5>Data Format</h5><input class="assayData" id="dataFormat"></div>
                                        <div><h5>Enzymes</h5><input class="assayData" id="enzymes"></div>
                                    </div>   
                                    <div class="span6"> 
                                        <div><h5>Ladder</h5><input class="assayData" id="ladder"></div>
                                        <div><h5>Protocol Details</h5><input class="assayData" id="details"></div>
                                        <div><h5>Link to Protocol</h5><input class="assayData" id="rdProtocolLink"></div>
                                        <div><h5>Link to gel image</h5><input class="assayData" id="gelImage"></div>
                                        <div><h5>Caption for gel image</h5><input class="assayData" id="gelImageCaption"></div>
                                    </div> 
                                </div>
                                <br>
                                <button id="removeRDButton" type="button"><Strong>Remove</strong></button>
                            </div> 
                        </div> 

                        <div id="functionalityAssays" class="hidden">   
                            <h3>Flow Cytometry</h3>
                            <div class="well">    
                                <div class="row-fluid experiment">
                                    <div class="span4">    
                                        <div><h5>Purpose</h5><input class="assayData" id="purpose"></div>
                                        <div><h5>Data Type</h5><input class="assayData" id="dataType"></div>
                                        <div><h5>Location</h5><input class="assayData" id="location"></div>
                                        <div><h5>Data Format</h5><input class="assayData" id="dataFormat"></div>
                                        <div><h5>Machine Name</h5><input class="assayData" id="machineName"></div>
                                        <div><h5>Protocol Details</h5><input class="assayData" id="protocolDetails"></div>
                                        <div><h5>Link to Protocol</h5><input class="assayData" id="protocolLink"></div>
                                    </div>
                                    <div class="span6">
                                        <div><h5>Lasers(filters) Used</h5><input class="assayData" id="lasers"></div>
                                        <div><h5>Link to Transfer Curve Image</h5><input class="assayData" id="transerCurve"></div>
                                        <div><h5>Caption for Transfer Curve</h5><input class="assayData" id="transerCurveCaption"></div>
                                        <div><h5>Time Sequence Graph</h5><input class="assayData" id="timeCurve"></div>
                                        <div><h5>Caption for Time Sequence Graph</h5><input class="assayData" id="timeCurveCaption"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="well">
                                <div class="row-fluid setup">
                                    <div class="span4" id="preinductionGrowthConditions">
                                        <h4 >Pre-Induction Growth Conditions</h4>
                                        <div><h5>Media Type</h5><input class="assayData" id="media"></div>
                                        <div><h5>Vessel</h5><input class="assayData" id="vessel"></div>
                                        <div><h5>Volume</h5><input class="assayData" id="volume"></div>
                                        <div><h5>Incubation</h5><input class="assayData" id="incubation"></div>
                                        <div><h5>Time(mins)</h5><input class="assayData" id="time"></div>

                                    </div>
                                    <div class="span6" id="inductionGrowthConditions">
                                        <h4 >Induction Growth Conditions</h4>
                                        <div><h5>Media Type</h5><input class="assayData" id="media"></div>
                                        <div><h5>Vessel</h5><input class="assayData" id="vessel"></div>
                                        <div><h5>Volume</h5><input class="assayData" id="volume"></div>
                                        <div><h5>Incubation</h5><input class="assayData" id="incubation"></div>
                                        <div><h5>Incubation Time(mins)</h5><input class="assayData" id="time"></div>
                                        <div><h5>Bacteria Phase</h5><input class="assayData" id="phase"></div>
                                    </div>
                                </div> 
                                <button id="removeFlowCytometryButton" type="button"><Strong>Remove</strong></button>
                                <br>   

                            </div>
                        </div>    
                        <div id="otherAssay" class="hidden">   
                            <h3>Add New Assay</h3>
                            <div class="well">    
                                <div class="row-fluid">
                                    <div class="span4">   
                                        <div><h5>New Assay Name</h5><input class="assayData" id="newAssayName"></div>
                                        <div><h5>New Assay Purpose</h5><input class="assayData" id="newAssayPurpose"></div>
                                        <div><h5>Add Link to Image</h5><input class="assayData" id="newAssayImage"></div>
                                        <div><h5>Add Additional Data (Link)</h5><input class="assayData" id="newAssayDataLink"></div>
                                        <div><h5>Parameter</h5><input class="assayData" id="newPar1"></div>
                                        <div><h5>Parameter</h5><input class="assayData" id="newPar2"></div>
                                        <div><h5>Parameter</h5><input class="assayData" id="newPar3"></div>
                                        <br>
                                    </div>
                                    <div class="span6">
                                        <div><h5>Protocol Details </h5><input class="assayData" id="newProtocol"></div>
                                        <div><h5>Link to Protocol</h5><input class="assayData" id="newProtocolLink"></div>
                                        <div><h5>Add Caption for Image</h5><input class="assayData" id="newAssayImageCaption"></div>
                                        <div><h5>Add Additional Data (Details)</h5><input class="assayData" id="newAssayDataDetails"></div>
                                        <div><h5>Value</h5><input class="assayData" id="newVal1"></div>
                                        <div><h5>Value</h5><input class="assayData" id="newVal2"></div>
                                        <div><h5>Value</h5><input class="assayData" id="newVal3"></div>
                                        <br>
                                    </div>
                                    <br>
                                </div>
                                <div class="row-fluid">
                                    <div id="additionalAssayComments"><h5>Additional Comments</h5><textarea class = "assayData" id="comments" rows="5" style="width:100%"></textarea></div>
                                </div>
                                <button class="btn" id="removeOtherButton"><strong>Remove</strong></button>
                            </div>          
                        </div>
                        <button class="btn back"><strong>Back</strong></button>
                    </div>
                </div>
            </div>
        </div>
              
        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script> 
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
        <script>
            $.get("ParserServlet", function(data) {
                $("#name").val(data.name);
                $("#summary").val(data.summary);
                $("#authors").val(data.contactInformation.authors);
                $("#sequence").val(data.sequence);
                $("#date").val(data.designInformation.date);
                $("#deviceName").val(data.name);
                $("#deviceType").val(data.designInformation.deviceType);
            });
        </script>
        
        <!--scripts placed at the end to enhance page loading speed--> 
        <script type="text/javascript" src="libraries/jquery-1.9.1.min.js"></script> 
        <script src="libraries/bootstrap.min.js"></script>         
        <script>
            function getCookie(c_name) {
                var c_value = document.cookie;
                var c_start = c_value.indexOf(" " + c_name + "=");
                if (c_start === -1) {
                    c_start = c_value.indexOf(c_name + "=");
                }
                if (c_start === -1) {
                    c_value = null;
                }
                else {
                    c_start = c_value.indexOf("=", c_start) + 1;
                    var c_end = c_value.indexOf(";", c_start);
                    if (c_end === -1) {
                        c_end = c_value.length;
                    }
                    c_value = unescape(c_value.substring(c_start, c_end));
                }
                return c_value;
            }

            function deleteCookie(key) {
                // Delete a cookie by setting the date of expiry to yesterday
                date = new Date();
                date.setDate(date.getDate() - 1);
                document.cookie = escape(key) + '=;expires=' + date;
            }

            if (getCookie("authenticate") !== "authenticated") {
                deleteCookie("user");
            }

            if (getCookie("authenticate") === "authenticated") {
                $('#loginArea').html('<p class="pull-right" style="margin-top:10px">You are logged in as <strong>' + getCookie("user") + '</strong> <a id="logout">Log Out</a></p>');
                $('#logout').click(function() {
                    $.get("AuthenticationServlet", {"command": "logout"}, function() {
                        deleteCookie("authenticate");
                        deleteCookie("user");
                        window.location.replace("index.html");
                    });
                });
            }
            $('#loginForm').submit(function(e) {
                var self = this;
                e.preventDefault();
                if ($('#loginForm input[name="user"]').val() === "") {
                    $('#loginModal').modal();
                } else if ($('#loginForm input[name="password"]').val() === "") {
                    $('#loginModal').modal();
                } else {
                    self.submit();
                }
            });
            $('#loginForm').submit(function(e) {
                var self = this;
                e.preventDefault();
                if ($('#loginFormMain input[name="user"]').val() === "") {
                    $('#loginModal').modal();
                } else if ($('#loginForm input[name="password"]').val() === "") {
                    $('#loginModal').modal();
                } else {
                    self.submit();
                }
            });
        </script>

        <footer>
            <div class="container" align="center">
                <p>Designed and built by <a href="contact.html">BU iGEM Team</a> at <a href="http://wiki.bu.edu/ece-cidar/index.php/Main_Page">CIDAR</a></p>
                <p>Code licensed under <a href="license.html">LICENSE</a></p>
            </div>
        </footer>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script> 
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
        <script src="javascript/dynamicFormController.js"></script>

    </body>
</html>


